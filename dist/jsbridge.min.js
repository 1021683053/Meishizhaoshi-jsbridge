!function(){function e(e){if(window.WebViewJavascriptBridge)return e(WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var t=document.createElement("iframe");t.style.display="none",t.src="wvjbscheme://__BRIDGE_LOADED__",document.documentElement.appendChild(t),setTimeout(function(){document.documentElement.removeChild(t)},0)}function t(e){return function(t){return{}.toString.call(t)=="[object "+e+"]"}}function i(e,t){var i=[];t||console.error("Native api is empty!");var n={name:t,param:{},callback:function(){}},e=y(e)?e:[].slice.call(e);return!e[1]&&g(e[0])&&(n.callback=e[0]),!m(e[0])||(n.param=e[0]),!g(e[1])||(n.callback=e[1]),i.push(n.name),i.push(n.param),i.push(n.callback),i}function n(e){var t=window.location.origin;window.location.href;return/^http[s]?\:\/\//.test(e)?e:/^\//.test(e)?t+e:void 0}function o(){var e=r(4),t=(new Date).getTime();return e+"_"+t}function r(e){for(var t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],i="",n=0;n<e;n++){var o=Math.ceil(25*Math.random());i+=t[o]}return i}function a(e){var t=e;return[].slice.call(arguments,1).forEach(function(e){var i=Object.getOwnPropertyNames(e);i.forEach(function(i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n)})}),t}var l=navigator.userAgent,c=function(e,t){function i(e,t){var i=t.replace(/<\%flg\%>/,e);return new RegExp(i)}if(this==window)return new c(e,t);var n=null,o=i(e,"(<%flg%>)/([M|C])_(\\d+(?:.\\d+(?:.\\d+)?)?)");n=t.match(o),this.version=(n?n[3]:null)||0,this.category=(n?n[2]:null)||0,this.name=(n?n[1]:null)||"Browser"},p=new c("Meishizhaoshi",l),s="index.html";if(!p||"Meishizhaoshi"!=p.name)return window.location.replace(s+"?callback"+encodeURI(window.location.href)),!1;var h={},u=e;h.native=window.WebViewJavascriptBridge||null,h.init=function(){var e=[].slice.call(arguments)[0];return h.native?void(e&&e()):void u(function(t){h.native=t,e&&e()})},h.on=function(){var e=[].slice.call(arguments);h.native.registerHandler.apply(u,e)},h.emit=function(){var e=[].slice.call(arguments);h.native.callHandler.apply(u,e)},h.client=p,h.isAndroid=l.indexOf("Android")>-1||l.indexOf("Adr")>-1,h.isiOS=!!l.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);var f=function(){};f.prototype=h;var d={B:"Busi",U:"User",S:"Static"},m=t("Object"),v=t("String"),y=Array.isArray||t("Array"),g=t("Function");t("Undefined");f.prototype.share=function(){var e=i(arguments,"showShareView");this.emit.apply(h,e)},f.prototype.cityview=function(){var e=i(arguments,"openCityChooseView");this.emit.apply(h,e)},f.prototype.city=function(){var e=i(arguments,"getCityNameAndId");this.emit.apply(h,e)},f.prototype.reload=function(){var e=i(arguments,"refreshWebView");this.emit.apply(h,e)},f.prototype.token=function(){var e=i(arguments,"getUserToken");this.emit.apply(h,e)},f.prototype.inloader=function(){var e=i(arguments,"showLoading");this.emit.apply(h,e)},f.prototype.unloader=function(){var e=i(arguments,"hideLoading");this.emit.apply(h,e)},f.prototype.link=function(){var e=[].slice.call(arguments),t=e[0]||"",o=[],r={};r.url=n(t),o.push(r);var a=i(o,"openURL");this.emit.apply(h,a)},f.prototype.oslink=function(){var e=[].slice.call(arguments),t=e[0]||"",o=[],r={};r.URL=n(t),o.push(r);var a=i(o,"openSysURL");this.emit.apply(h,a)},f.prototype.alert=function(){var e,t=[].slice.call(arguments),n=[],r={type:"alert",confirmTitle:"确定",confirmMethodName:"",confirmMethodIdentifier:"",title:"消息",message:"点击确定"},l=o(),c={confirmTitle:"确定",title:"消息",message:"提示确定"};m(t[0])&&(c=a(c,t[0])),v(t[0])&&(c.message=t[0]),v(t[1])&&(c.title=t[1]),g(t[t.length-1])&&(e=t[t.length-1]),r=a(r,c),r.confirmMethodName=l,r.confirmMethodIdentifier=l,this.on(l,function(t){e(t.identifier)});var n=[];n.push(r);var p=i(n,"showAlert");this.emit.apply(h,p)},f.prototype.confirm=function(){var e=[].slice.call(arguments),t=[],n={type:"confirm",confirmTitle:"确定",confirmMethodName:"",confirmMethodIdentifier:"",cancelMethodName:"",cancelMethodIdentifier:"",cancelTitle:"取消",title:"消息",message:"点击确定"},r=o(),l=o(),c=function(){},p=function(){},s={confirmTitle:"确定",cancelTitle:"取消",message:"点击确定",title:"消息"};m(e[0])&&(s=a(s,e[0])),v(e[0])&&(s.message=e[0]),v(e[1])&&(s.title=e[1]),g(e[e.length-1])&&g(e[e.length-2])&&(c=e[e.length-1],p=e[e.length-2]),g(e[e.length-1])&&!g(e[e.length-2])&&(p=e[e.length-1]),n=a(n,s),n.confirmMethodName=l,n.confirmMethodIdentifier=l,n.cancelMethodName=r,n.cancelMethodIdentifier=r,this.on(l,function(e){p(e.identifier)}),this.on(r,function(e){c(e.identifier)});var t=[];t.push(n);var u=i(t,"showAlert");this.emit.apply(h,u)},f.prototype.message=function(e){var t=[].slice.call(arguments),n=[];n.push({message:t[0]});var o=i(n,"showMessage");this.emit.apply(h,o)},f.prototype.stoppull=function(){var e=i(arguments,"stopPullRefreshWebView");this.emit.apply(h,e)},f.prototype.close=function(){var e=i(arguments,"closeWindow");this.emit.apply(h,e)},f.prototype.GET=function(){var e,t=[].slice.call(arguments),n=[],o={path:"/",param:{},method:"GET",host:d.B};g(t[t.length-1])&&(e=t[t.length-1]),v(t[1])&&(o.path=t[1]),m(t[2])&&(o.param=t[2]),o.host=d[t[0]],n.push(o,e);var r=i(n,"sendApi");this.emit.apply(h,r)},f.prototype.POST=function(){var e,t=[].slice.call(arguments),n=[],o={path:"/",param:{},method:"POST",host:d.B};g(t[t.length-1])&&(e=t[t.length-1]),v(t[1])&&(o.path=t[1]),m(t[2])&&(o.param=t[2]),o.host=d[t[0]],n.push(o,e);var r=i(n,"sendApi");this.emit.apply(h,r)},f.prototype.sys=function(e,t){var n={identifier:e,param:m(t)?t:{}},o=i([n],"openWindow");this.emit.apply(h,o)},f.prototype.parent=function(){var e=[].slice.call(arguments),t=e[1]?e[0]:"childenClose",n=e[e.length-1],o={handlerName:t,param:n||{}},r=i([o],"prevBridgeCall");this.emit.apply(h,r)},f.prototype.enright=function(e){var t={title:"确定",titleHexColor:"#000000",font:"16"};t.title=e?e:"确定";var n=i([t],"setRightItem");this.emit.apply(h,n)},f.prototype.enpull=function(){var e=i(arguments,"addPullRefreshWebView");this.emit.apply(h,e)},f.prototype.disbomb=function(){var e={};e.bounced="no",this.emit("canBounced",e,function(){})};var w={bomb:!0,text:!1,textcb:!1,pullcb:!1,soncb:!1};f.prototype.configure=function(e){console.log(e);for(key in e)w[key]=e[key];return this},f.prototype.onload=function(){var e=[].slice.call(arguments)[0],t=this;this.init(function(){w.text&&v(w.text)&&t.enright(w.text),w.textcb&&g(w.textcb)&&t.on("rightItemOnClick",w.textcb),w.pullcb&&g(w.pullcb)&&(t.enpull(),t.on("refreshTriggered",function(){w.pullcb(function(){t.stoppull()})})),w.soncb&&g(w.soncb)&&t.on("childenClose",soncb),w.bomb||t.disbomb(),e()})},"function"==typeof define?define(function(){return new f}):"undefined"!=typeof exports?module.exports=null:this.M=new f}();