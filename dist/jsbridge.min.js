!function(){function e(e){if(window.WebViewJavascriptBridge)return e(WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var t=document.createElement("iframe");t.style.display="none",t.src="wvjbscheme://__BRIDGE_LOADED__",document.documentElement.appendChild(t),setTimeout(function(){document.documentElement.removeChild(t)},0)}function t(e){return function(t){return{}.toString.call(t)=="[object "+e+"]"}}function n(e,t){var n=[];t||console.error("Native api is empty!");var i={name:t,param:{},callback:function(){}},e=y(e)?e:[].slice.call(e);return!e[1]&&g(e[0])&&(i.callback=e[0]),!d(e[0])||(i.param=e[0]),!g(e[1])||(i.callback=e[1]),n.push(i.name),n.push(i.param),n.push(i.callback),n}function i(e){var t=window.location.origin;window.location.href;return/^http[s]?\:\/\//.test(e)?e:/^\//.test(e)?t+e:void 0}function o(){var e=a(4),t=(new Date).getTime();return e+"_"+t}function a(e){for(var t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n="",i=0;i<e;i++){var o=Math.ceil(25*Math.random());n+=t[o]}return n}function r(e,t,n){for(var i=0;i<e.length;i++)e[i].name==t&&"on"==e[i].type&&(e[i].cb=n),e[i].name==t&&"emit"==e[i].type&&(e[i].enable=n)}function l(e){var t=e;return[].slice.call(arguments,1).forEach(function(e){var n=Object.getOwnPropertyNames(e);n.forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i)})}),t}var c=navigator.userAgent,p=function(e,t){function n(e,t){var n=t.replace(/<\%flg\%>/,e);return new RegExp(n)}if(this==window)return new p(e,t);var i=null,o=n(e,"(<%flg%>)/([M|C])_(\\d+(?:.\\d+(?:.\\d+)?)?)");i=t.match(o),this.version=(i?i[3]:null)||0,this.category=(i?i[2]:null)||0,this.name=(i?i[1]:null)||"Browser"},s=new p("Meishizhaoshi",c),h={},f=e;h.native=window.WebViewJavascriptBridge||null,h.init=function(){console.log(arguments);var e=[].slice.call(arguments)[0];return h.native?void(e&&e()):void f(function(t){h.native=t,e&&e()})},h.on=function(){var e=[].slice.call(arguments);h.native.registerHandler.apply(f,e)},h.emit=function(){var e=[].slice.call(arguments);h.native.callHandler.apply(f,e)},h.client=s,h.isAndroid=c.indexOf("Android")>-1||c.indexOf("Adr")>-1,h.isiOS=!!c.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),h.base="http://10.0.0.1:8080";var u=function(){this.config=[{name:"pull",event:"refreshTriggered",type:"on"},{name:"close",event:"childenClose",type:"on"},{name:"right",event:"rightItemOnClick",type:"on"},{name:"enableRight",event:"EnableRight",type:"emit"},{name:"enablePull",event:"EnablePull",type:"emit"}]};u.prototype=h;var m={B:"Busi",U:"User",S:"Static"},d=t("Object"),v=t("String"),y=Array.isArray||t("Array"),g=t("Function");t("Undefined");u.prototype.share=function(){var e=n(arguments,"showShareView");this.emit.apply(h,e)},u.prototype.cityview=function(){var e=n(arguments,"openCityChooseView");this.emit.apply(h,e)},u.prototype.city=function(){var e=n(arguments,"getCityNameAndId");this.emit.apply(h,e)},u.prototype.reload=function(){var e=n(arguments,"refreshWebView");this.emit.apply(h,e)},u.prototype.token=function(){var e=n(arguments,"getUserToken");this.emit.apply(h,e)},u.prototype.inloader=function(){var e=n(arguments,"showLoading");this.emit.apply(h,e)},u.prototype.unloader=function(){var e=n(arguments,"hideLoading");this.emit.apply(h,e)},u.prototype.link=function(){var e=[].slice.call(arguments),t=e[0]||"",o=[],a={};a.url=i(t),o.push(a);var r=n(o,"openURL");this.emit.apply(h,r)},u.prototype.oslink=function(){var e=[].slice.call(arguments),t=e[0]||"",o=[],a={};a.URL=i(t),o.push(a);var r=n(o,"openSysURL");this.emit.apply(h,r)},u.prototype.alert=function(){var e,t=[].slice.call(arguments),i=[],a={type:"alert",confirmTitle:"确定",confirmMethodName:"",confirmMethodIdentifier:"",title:"消息",message:"点击确定"},r=o(),c={confirmTitle:"确定",title:"消息",message:"提示确定"};d(t[0])&&(c=l(c,t[0])),v(t[0])&&(c.message=t[0]),v(t[1])&&(c.title=t[1]),g(t[t.length-1])&&(e=t[t.length-1]),a=l(a,c),a.confirmMethodName=r,a.confirmMethodIdentifier=r,this.on(r,function(t){e(t.identifier)});var i=[];i.push(a);var p=n(i,"showAlert");this.emit.apply(h,p)},u.prototype.confirm=function(){var e=[].slice.call(arguments),t=[],i={type:"confirm",confirmTitle:"确定",confirmMethodName:"",confirmMethodIdentifier:"",cancelMethodName:"",cancelMethodIdentifier:"",cancelTitle:"取消",title:"消息",message:"点击确定"},a=o(),r=o(),c=function(){},p=function(){},s={confirmTitle:"确定",cancelTitle:"取消",message:"点击确定",title:"消息"};d(e[0])&&(s=l(s,e[0])),v(e[0])&&(s.message=e[0]),v(e[1])&&(s.title=e[1]),g(e[e.length-1])&&g(e[e.length-2])&&(c=e[e.length-1],p=e[e.length-2]),g(e[e.length-1])&&!g(e[e.length-2])&&(p=e[e.length-1]),i=l(i,s),i.confirmMethodName=r,i.confirmMethodIdentifier=r,i.cancelMethodName=a,i.cancelMethodIdentifier=a,this.on(r,function(e){p(e.identifier)}),this.on(a,function(e){c(e.identifier)});var t=[];t.push(i);var f=n(t,"showAlert");this.emit.apply(h,f)},u.prototype.message=function(e){var t=[].slice.call(arguments),i=[];i.push({message:t[0]});var o=n(i,"showMessage");this.emit.apply(h,o)},u.prototype.stoppull=function(){var e=n(arguments,"stopPullRefreshWebView");this.emit.apply(h,e)},u.prototype.close=function(){var e=n(arguments,"closeWindow");this.emit.apply(h,e)},u.prototype.GET=function(){var e,t=[].slice.call(arguments),i=[],o={path:"/",param:{},method:"GET",host:m.B};g(t[t.length-1])&&(e=t[t.length-1]),v(t[1])&&(o.path=t[1]),d(t[2])&&(o.param=t[2]),o.host=m[t[0]],i.push(o,e);var a=n(i,"sendApi");this.emit.apply(h,a)},u.prototype.POST=function(){var e,t=[].slice.call(arguments),i=[],o={path:"/",param:{},method:"POST",host:m.B};g(t[t.length-1])&&(e=t[t.length-1]),v(t[1])&&(o.path=t[1]),d(t[2])&&(o.param=t[2]),o.host=m[t[0]],i.push(o,e);var a=n(i,"sendApi");this.emit.apply(h,a)},u.prototype.sys=function(e,t){var i={identifier:e,param:d(t)?t:{}},o=n([i],"openWindow");this.emit.apply(h,o)},u.prototype.parent=function(){var e=[].slice.call(arguments),t=e[1]?e[0]:"childenClose",i=e[e.length-1],o={handlerName:t,param:i||{}},a=n([o],"prevBridgeCall");this.emit.apply(h,a)},u.prototype.EnableRight=function(e){var t={title:"确定",titleHexColor:"#000000",font:"16"};t.title=e?e:"确定";var i=n([t],"setRightItem");this.emit.apply(h,i)},u.prototype.EnablePull=function(){var e=n(arguments,"addPullRefreshWebView");this.emit.apply(h,e)},u.prototype.configure=function(e){var t=this.config;if(!d(e))return this;for(var n in e)r(t,n,e[n]);return this},u.prototype.onload=function(){var e=[].slice.call(arguments)[0],t=this,n=this.config;this.init(function(){for(var i=0;i<n.length;i++)n[i].cb&&t.on(n[i].event,n[i].cb),n[i].enable&&t[n[i].event](n[i].enable);e()})},"function"==typeof define?define(function(){return new u}):"undefined"!=typeof exports?module.exports=null:this.M=new u}();