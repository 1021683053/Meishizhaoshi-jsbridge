!function(){function e(e){if(window.WebViewJavascriptBridge)return e(WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var t=document.createElement("iframe");t.style.display="none",t.src="wvjbscheme://__BRIDGE_LOADED__",document.documentElement.appendChild(t),setTimeout(function(){document.documentElement.removeChild(t)},0)}function t(e){return function(t){return{}.toString.call(t)=="[object "+e+"]"}}function i(e,t){var i=[];t||console.error("Native api is empty!");var n={name:t,param:{},callback:function(){}},e=v(e)?e:[].slice.call(e);return!e[1]&&y(e[0])&&(n.callback=e[0]),!d(e[0])||(n.param=e[0]),!y(e[1])||(n.callback=e[1]),i.push(n.name),i.push(n.param),i.push(n.callback),i}function n(e){var t=window.location.origin;window.location.href;return/^http[s]?\:\/\//.test(e)?e:/^\//.test(e)?t+e:void 0}function o(){var e=r(4),t=(new Date).getTime();return e+"_"+t}function r(e){for(var t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],i="",n=0;n<e;n++){var o=Math.ceil(25*Math.random());i+=t[o]}return i}function a(e){var t=e;return[].slice.call(arguments,1).forEach(function(e){var i=Object.getOwnPropertyNames(e);i.forEach(function(i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n)})}),t}var l=navigator.userAgent,c=function(e,t){function i(e,t){var i=t.replace(/<\%flg\%>/,e);return new RegExp(i)}if(this==window)return new c(e,t);var n=null,o=i(e,"(<%flg%>)/([M|C])_(\\d+(?:.\\d+(?:.\\d+)?)?)");n=t.match(o),this.version=(n?n[3]:null)||0,this.category=(n?n[2]:null)||0,this.name=(n?n[1]:null)||"Browser"},p=new c("Meishizhaoshi",l),s={},h=e;s.native=window.WebViewJavascriptBridge||null,s.init=function(){var e=[].slice.call(arguments)[0];return s.native?void(e&&e()):void h(function(t){s.native=t,e&&e()})},s.on=function(){var e=[].slice.call(arguments);s.native.registerHandler.apply(h,e)},s.emit=function(){var e=[].slice.call(arguments);s.native.callHandler.apply(h,e)},s.client=p,s.isAndroid=l.indexOf("Android")>-1||l.indexOf("Adr")>-1,s.isiOS=!!l.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);var u=function(){};u.prototype=s;var f={B:"Busi",U:"User",S:"Static"},d=t("Object"),m=t("String"),v=Array.isArray||t("Array"),y=t("Function");t("Undefined");u.prototype.share=function(){var e=i(arguments,"showShareView");this.emit.apply(s,e)},u.prototype.cityview=function(){var e=i(arguments,"openCityChooseView");this.emit.apply(s,e)},u.prototype.city=function(){var e=i(arguments,"getCityNameAndId");this.emit.apply(s,e)},u.prototype.reload=function(){var e=i(arguments,"refreshWebView");this.emit.apply(s,e)},u.prototype.token=function(){var e=i(arguments,"getUserToken");this.emit.apply(s,e)},u.prototype.inloader=function(){var e=i(arguments,"showLoading");this.emit.apply(s,e)},u.prototype.unloader=function(){var e=i(arguments,"hideLoading");this.emit.apply(s,e)},u.prototype.link=function(){var e=[].slice.call(arguments),t=e[0]||"",o=[],r={};r.url=n(t),o.push(r);var a=i(o,"openURL");this.emit.apply(s,a)},u.prototype.oslink=function(){var e=[].slice.call(arguments),t=e[0]||"",o=[],r={};r.URL=n(t),o.push(r);var a=i(o,"openSysURL");this.emit.apply(s,a)},u.prototype.alert=function(){var e,t=[].slice.call(arguments),n=[],r={type:"alert",confirmTitle:"确定",confirmMethodName:"",confirmMethodIdentifier:"",title:"消息",message:"点击确定"},l=o(),c={confirmTitle:"确定",title:"消息",message:"提示确定"};d(t[0])&&(c=a(c,t[0])),m(t[0])&&(c.message=t[0]),m(t[1])&&(c.title=t[1]),y(t[t.length-1])&&(e=t[t.length-1]),r=a(r,c),r.confirmMethodName=l,r.confirmMethodIdentifier=l,this.on(l,function(t){e(t.identifier)});var n=[];n.push(r);var p=i(n,"showAlert");this.emit.apply(s,p)},u.prototype.confirm=function(){var e=[].slice.call(arguments),t=[],n={type:"confirm",confirmTitle:"确定",confirmMethodName:"",confirmMethodIdentifier:"",cancelMethodName:"",cancelMethodIdentifier:"",cancelTitle:"取消",title:"消息",message:"点击确定"},r=o(),l=o(),c=function(){},p=function(){},h={confirmTitle:"确定",cancelTitle:"取消",message:"点击确定",title:"消息"};d(e[0])&&(h=a(h,e[0])),m(e[0])&&(h.message=e[0]),m(e[1])&&(h.title=e[1]),y(e[e.length-1])&&y(e[e.length-2])&&(c=e[e.length-1],p=e[e.length-2]),y(e[e.length-1])&&!y(e[e.length-2])&&(p=e[e.length-1]),n=a(n,h),n.confirmMethodName=l,n.confirmMethodIdentifier=l,n.cancelMethodName=r,n.cancelMethodIdentifier=r,this.on(l,function(e){p(e.identifier)}),this.on(r,function(e){c(e.identifier)});var t=[];t.push(n);var u=i(t,"showAlert");this.emit.apply(s,u)},u.prototype.message=function(e){var t=[].slice.call(arguments),n=[];n.push({message:t[0]});var o=i(n,"showMessage");this.emit.apply(s,o)},u.prototype.stoppull=function(){var e=i(arguments,"stopPullRefreshWebView");this.emit.apply(s,e)},u.prototype.close=function(){var e=i(arguments,"closeWindow");this.emit.apply(s,e)},u.prototype.GET=function(){var e,t=[].slice.call(arguments),n=[],o={path:"/",param:{},method:"GET",host:f.B};y(t[t.length-1])&&(e=t[t.length-1]),m(t[1])&&(o.path=t[1]),d(t[2])&&(o.param=t[2]),o.host=f[t[0]],n.push(o,e);var r=i(n,"sendApi");this.emit.apply(s,r)},u.prototype.POST=function(){var e,t=[].slice.call(arguments),n=[],o={path:"/",param:{},method:"POST",host:f.B};y(t[t.length-1])&&(e=t[t.length-1]),m(t[1])&&(o.path=t[1]),d(t[2])&&(o.param=t[2]),o.host=f[t[0]],n.push(o,e);var r=i(n,"sendApi");this.emit.apply(s,r)},u.prototype.sys=function(e,t){var n={identifier:e,param:d(t)?t:{}},o=i([n],"openWindow");this.emit.apply(s,o)},u.prototype.parent=function(){var e=[].slice.call(arguments),t=e[1]?e[0]:"childenClose",n=e[e.length-1],o={handlerName:t,param:n||{}},r=i([o],"prevBridgeCall");this.emit.apply(s,r)},u.prototype.enright=function(e){var t={title:"确定",titleHexColor:"#000000",font:"16"};t.title=e?e:"确定";var n=i([t],"setRightItem");this.emit.apply(s,n)},u.prototype.enpull=function(){var e=i(arguments,"addPullRefreshWebView");this.emit.apply(s,e)},u.prototype.disbomb=function(){var e={};e.bounced="no",this.emit("canBounced",e,function(){})};var g={bomb:!0,text:!1,textcb:!1,pullcb:!1,soncb:!1};u.prototype.configure=function(e){console.log(e);for(key in e)g[key]=e[key];return this},u.prototype.onload=function(){var e=[].slice.call(arguments)[0],t=this;this.init(function(){g.text&&m(g.text)&&t.enright(g.text),g.textcb&&y(g.textcb)&&t.on("rightItemOnClick",g.textcb),g.pullcb&&y(g.pullcb)&&(t.enpull(),t.on("refreshTriggered",function(){g.pullcb(function(){t.stoppull()})})),g.soncb&&y(g.soncb)&&t.on("childenClose",soncb),g.bomb||y(pullcb)||t.disbomb(),e()})},"function"==typeof define?define(function(){return new u}):"undefined"!=typeof exports?module.exports=null:this.M=new u}();