<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <title>招商银行测试</title>
    </head>
    <style>
        html,body{
            margin: 0;
            padding: 0;
        }
        .m{
            padding: 10px;
        }
        .btm{
            display: block;
            font-size: 22px;
            line-height: 2em;
            color: #FFF;
            text-decoration: none;
            text-align: center;
            background: #333;
        }
    </style>
    <body>
        <div class="m">
            <a href="javascript:;" class="btm" id="bridgeBtm" attr-data="true">确定</a>
        </div>
    </body>
</html>
<script type="text/javascript">
    ;(function(global){

        //触发事件
        document.getElementById('bridgeBtm').onclick = function(){
            var flag = this.getAttribute('attr-data');
            Proxy(function(bridge){
                bridge.callHandler("getCityNameAndId", {}, function(res){
                    alert("");
                });
            });
            // Proxy(function(bridge){
            //     if( flag ){
            //         bridge.callHandler("openRechargeList", {},function(res){
            //             alert(JSON.stringify(res));
            //         });
            //     }else{
            //         bridge.callHandler("openPositionList", {}, function(res){
            //             alert(JSON.stringify(res));
            //         });
            //     }
            // });
        }

        //设置JavaScript brige
        function Proxy(callback) {
              if (window.WebViewJavascriptBridge) { return callback(WebViewJavascriptBridge); }
              if (window.WVJBCallbacks) { return window.WVJBCallbacks.push(callback); }
              window.WVJBCallbacks = [callback];
              var WVJBIframe = document.createElement('iframe');
              WVJBIframe.style.display = 'none';
              WVJBIframe.src = 'wvjbscheme://__BRIDGE_LOADED__';
              document.documentElement.appendChild(WVJBIframe);
              setTimeout(function() { document.documentElement.removeChild(WVJBIframe) }, 0)
        };
    })(window);
</script>
